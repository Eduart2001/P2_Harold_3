{% extends 'base.html' %}

{%block head%}
    {%block option_bar%}
        <!--creating an option bar to access easily the different,
            categories or services of the webpage-->
            <header>
                <div class="container">
                    <!--container(name) division helps to separate our work in smaller divisions, 
                        so it will be easier to implement or manipulate with CSS styles-->
                    <div class="nav-list">
                        <!--nav-list(name) division helps to separate our work in smaller divisions, 
                            so it will be easier to implement or manipulate with CSS styles 
                            
                            It contains four list items to which we are going to associate a link to redirect us.  -->
                        <li> 
                            <a href="#" class="nav-link" id="theFarm">The Farm</a>
                        </li>
                        <li> 
                            <a href="#" class="nav-link" id="services">Services</a>
                        </li>
                        <li> 
                            <a href="#" class="nav-link" id="types">Animal types </a>
                        </li>
                        <li> 
                            <a href="#" class="nav-link" id="charts">charts</a>
                        </li>
                        <li> 
                            <a href="#" class="nav-link" id="contact">Contact</a>
                        </li>

                        <div class="language">
                            <li>
                                <a onclick="changeLanguage()" class="nav-link" id="languageSwitcher">Fr</a>
                            </li>
                        </div>
                    </div>
                </div>

            </header>
        {% endblock %}
{% endblock %}


{%block body%}
    {%block farmblock%}
        <div class="thefarm-block">
            <img src="static\images\home-image.jpg" class="farm-image">
            <p class="about-the-farm">
                The (Name) to be continued index.html l:47 
            </p>
        </div>
    {%endblock%}
    
    {%block charts%}
        <div class="charts-selector">
            <select class="left-select select" name="graph-to-display" id="graph-select">
                <option id="select1" value="">Choose a graph to show</option>
                    <option value="0">Graph1</option>
                    <option value="1">Graph2</option>
                    <option value="2">Graph3</option>
            </select>
            <select class="center-select select" name="month" id="family-select">
                <option id="select2" value="">Select a period of time</option>
                {% for famille in familles%}
                    <option value="">{{famille}}</option>
                {%endfor%}
            </select>
            <select class="right-select select" name="family" id="family-select">
                <option id="select3" value="">Choose a family</option>
                {% for famille in familles%}
                    <option value="">{{famille}}</option>
                {%endfor%}
            </select>
        </div>
        <div class="center-button">
            <button id="bouton" class="button button1" onClick="graphic_creation(document.getElementById('graph-select').value)">Show</button><!--Bouton pour montrer le graphique-->
          </div>
        <!--<p id="demo"></p>-->
        <div class="chart"><canvas id="graphique" width="800px" height="550px"></canvas></div>
    {%endblock%}


  <script>
    // Create a function to change
    // the hash value of the page
    var names= "{{keys}}"
    var values = "{{values}}"
    const myArray_names = names.replace("dict_keys([","").replace("])","").split(",").reverse()
    const myArray = values.replace("dict_values([","").replace("])","").split(",").reverse()

    function chart_creation(graph_type){
        if(graph_type==0){
            // l'identifiant est celui du canevas
            var ctx = document.getElementById('graphique').getContext('2d');
            // création du graphique
            var myChart = new Chart(ctx, {
            type: 'bar',   // le type du graphique
            data: {        // les données
                labels: myArray_names,
                datasets: [{
                            label: 'votes',
                            data:myArray,
                            backgroundColor: [ //couleur du fond des batonets
                            'rgba(255, 99, 132, 0.2)',//red (red, green, blue, transparency)
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(153, 102, 255, 0.2)',
                            'rgba(255, 159, 64, 0.2)'
                            ],
                            borderColor: [
                                'rgba(255, 99, 132, 1)', //les bords des batonets
                                'rgba(54, 162, 235, 1)',
                                'rgba(255, 206, 86, 1)',
                                'rgba(75, 192, 192, 1)',
                                'rgba(153, 102, 255, 1)',
                                'rgba(255, 159, 64, 1)'
                            ],
                            borderWidth: 1, //épaiseur des bords
                        }]
                },
                options: {
             
                   responsive: false
             
                }
                }
            );
            }
        if(graph_type==1){
                        // l'identifiant est celui du canevas
                        var ctx = document.getElementById('graphique').getContext('2d');
            // création du graphique
            var myChart = new Chart(ctx, {
            type: 'bar',   // le type du graphique
            data: {        // les données
                labels: ['Isai', 'Martine', 'Michel', 'Jules', 'Louise', 'Dominique'],
                datasets: [{
                            label: 'votes',
                            data: [12, 19, 3, 5, 2, 3],
                            backgroundColor: [ //couleur du fond des batonets
                            'rgba(255, 99, 132, 0.2)',//red (red, green, blue, transparency)
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(153, 102, 255, 0.2)',
                            'rgba(255, 159, 64, 0.2)'
                            ],
                            borderColor: [
                                'rgba(255, 99, 132, 1)', //les bords des batonets
                                'rgba(54, 162, 235, 1)',
                                'rgba(255, 206, 86, 1)',
                                'rgba(75, 192, 192, 1)',
                                'rgba(153, 102, 255, 1)',
                                'rgba(255, 159, 64, 1)'
                            ],
                            borderWidth: 1, //épaiseur des bords
                        }]
                }
                }
            );
        }

        if(graph_type==2){
                                    // l'identifiant est celui du canevas
                                    var ctx = document.getElementById('graphique').getContext('2d');
            // création du graphique
            var myChart = new Chart(ctx, {
            type: 'bar',   // le type du graphique
            data: {        // les données
                labels: ['Alex', 'Martine', 'Michel', 'Jules', 'Louise', 'Dominique'],
                datasets: [{
                            label: 'votes',
                            data: [12, 19, 3, 5, 2, 3],
                            backgroundColor: [ //couleur du fond des batonets
                            'rgba(255, 99, 132, 0.2)',//red (red, green, blue, transparency)
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(153, 102, 255, 0.2)',
                            'rgba(255, 159, 64, 0.2)'
                            ],
                            borderColor: [
                                'rgba(255, 99, 132, 1)', //les bords des batonets
                                'rgba(54, 162, 235, 1)',
                                'rgba(255, 206, 86, 1)',
                                'rgba(75, 192, 192, 1)',
                                'rgba(153, 102, 255, 1)',
                                'rgba(255, 159, 64, 1)'
                            ],
                            borderWidth: 1, //épaiseur des bords
                        }]
                }
                }
            );
        }
    }
    
    function changeLanguage() {
      location.hash = languageSwitcher.textContent;
      location.reload();
    }
  
    // Define the language reload anchors
    var language = {
      fr: {
        farm: "La Ferme",service:"Services",type:"Types d' animaux",graphic:"Graphiques" ,lang:"En", button:"Afficher", selection1:"Choisissez un graphique", selection2:"Choisissez une période", selection3:"Choix de la famille"
      }
    };
  
    // Check if a hash value exists in the URL
    if (window.location.hash) {
  
      // Set the content of the webpage 
      // depending on the hash value
      if (window.location.hash == "#Fr") {
          bouton.textContent = language.fr.button;
          select1.textContent = language.fr.selection1;
          select2.textContent = language.fr.selection2;
          select3.textContent = language.fr.selection3;
          theFarm.textContent =
          language.fr.farm;
          services.textContent =
          language.fr.service;
          types.textContent =
          language.fr.type;
          charts.textContent =
          language.fr.chart;
          languageSwitcher.textContent =
          language.fr.lang;
      }
    }
  </script>
{% endblock %}